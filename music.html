<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VoKi | Music Player</title>
<link rel="icon" type="image/png" href="VoKi Logo (Updated Bot Logo).png">

<style>
:root {
    --primary:#aeefff;
    --accent:#6dc8ff;
    --bg-gradient: linear-gradient(135deg,#4facfe,#6fa1ff,#8e44ad);
    --bg-dark: linear-gradient(135deg,#141e30,#1f2a45,#243b55);
    --text:#ffffff;
    --card: rgba(255,255,255,0.08);
    --card-hover: rgba(255,255,255,0.18);
    --nav: rgba(0,0,0,0.85);
    --radius: 14px;
}

/* Global */
*{box-sizing:border-box;}
body{margin:0;font-family:"Segoe UI",Arial,sans-serif;color:var(--text);background:var(--bg-gradient);background-size:400% 400%;animation:flow 25s ease infinite;-webkit-font-smoothing:antialiased;scroll-behavior:smooth;min-height:100vh;transition:background 0.5s ease;}
@keyframes flow{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
h1,h2,h3,p{margin:0;padding:0;}
a{color:inherit;text-decoration:none;}

/* Header & Nav */
header{position:sticky;top:0;z-index:1000;display:flex;align-items:center;justify-content:space-between;padding:1rem 2rem;background:var(--nav);border-bottom:1px solid rgba(255,255,255,0.04);backdrop-filter:blur(6px);}
.brand{display:flex;align-items:center;gap:12px;}
.brand img{width:44px;height:44px;border-radius:10px;object-fit:cover;}
.brand h1{color:var(--primary);font-size:1.25rem;letter-spacing:0.5px;}
nav{display:flex;align-items:center;gap:12px;}
.nav-links{display:flex;gap:8px;align-items:center;}
.nav-links a{padding:8px 12px;border-radius:10px;font-weight:600;transition:all 0.18s ease;}
.nav-links a:hover{background:var(--primary);color:#000;transform:translateY(-3px);}
.actions{display:flex;gap:10px;align-items:center;}
.icon-btn{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:transparent;border:1px solid rgba(255,255,255,0.04);cursor:pointer;}
.sep{width:2px;height:26px;background:var(--primary);opacity:0.6;border-radius:3px;}

/* Container & Hero */
.container{max-width:1100px;margin:0 auto;padding:3.2rem 1.5rem;text-align:center;}
h1{color:var(--primary);margin-bottom:0.6rem;font-size:2.1rem;}
.lead{max-width:820px;margin:0 auto;color:rgba(255,255,255,.95);opacity:.95;font-size:1.05rem;}

/* Sections & Cards */
.section{padding:48px 1.5rem;text-align:center;}
.card-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:22px;max-width:1100px;margin:22px auto 0;}
.card{background:var(--card);padding:20px;border-radius:var(--radius);transition:transform .25s ease,background .18s;box-shadow:0 10px 30px rgba(0,0,0,.25);}
.card:hover{transform:translateY(-6px);background:var(--card-hover);}

/* Music Player */
.player{display:flex;flex-direction:column;align-items:center;gap:12px;margin-top:20px;}
.track-info{display:flex;flex-direction:column;align-items:center;gap:6px;}
.track-info img{width:180px;height:180px;border-radius:14px;object-fit:cover;}
.track-info h3, .track-info p{margin:0;color:#fff;}
.controls{display:flex;gap:12px;align-items:center;margin-top:12px;}
.controls button{background:var(--primary);border:none;color:#000;padding:10px 16px;border-radius:12px;cursor:pointer;transition:transform 0.2s ease;}
.controls button:hover{transform:translateY(-2px);}
input[type="range"]{width:200px;}

/* Search */
#searchBar{width:100%;max-width:400px;padding:8px 12px;border-radius:12px;border:2px solid var(--primary);margin-top:20px;}

/* Footer */
footer{text-align:center;padding:28px 1.5rem;color:rgba(255,255,255,.8);position:relative;bottom:0;width:100%;}

/* Floating Menu */
#floatingMenu{position:fixed;bottom:24px;right:24px;display:flex;flex-direction:column-reverse;align-items:flex-end;z-index:1500;}
#floatingMenu .menu-toggle{width:56px;height:56px;border-radius:28px;background:var(--primary);color:#000;font-size:28px;border:none;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.3);}
#floatingMenu .menu-items{display:none;flex-direction:column;margin-bottom:12px;}
#floatingMenu .menu-items a{background:var(--card);padding:10px 16px;margin:4px 0;border-radius:14px;font-weight:600;transition:all .18s ease;}
#floatingMenu .menu-items a:hover{background:var(--card-hover);}
</style>
</head>
<body>

<header>
<div class="brand"><img src="VoKi Logo (Updated Bot Logo).png" alt="VoKi logo"><h1>VoKi</h1></div>
<nav>
<div class="nav-links">
<a href="index.html">Home</a>
<a href="team.html">Team</a>
<a href="ai-helper.html">Kite AI</a>
<a href="AI.html">VoKi AI</a>
<a href="tos.html">Legal</a>
</div>
<div class="actions">
<button id="themeToggle" class="icon-btn" title="Toggle theme">üåì</button>
</div>
</nav>
</header>

<main class="container">
<section class="section fade-in">
<h1>VoKi Music Player</h1>
<p class="lead">Search, preview, and play music. Full tracks require Spotify Premium.</p>

<input type="text" id="searchBar" placeholder="Search for songs, artists, or albums">

<div class="card-grid" id="songGrid"></div>

<div class="player" id="player" style="display:none;">
<div class="track-info">
<img src="" id="trackCover" alt="Cover">
<h3 id="trackTitle"></h3>
<p id="trackArtist"></p>
</div>
<div class="controls">
<button id="prevBtn">‚èÆÔ∏è</button>
<button id="playPauseBtn">‚ñ∂Ô∏è</button>
<button id="nextBtn">‚è≠Ô∏è</button>
<audio id="audioPlayer" preload="metadata"></audio>
</div>
</div>
</section>
</main>

<footer>
<p>¬© 2025 VoKi ‚Ä¢ Privacy‚ÄëFirst Moderation for Discord</p>
</footer>

<!-- Floating Menu -->
<div id="floatingMenu">
<div class="menu-items" id="menuItems"></div>
<button class="menu-toggle" id="menuToggle" title="Open menu">‚ò∞</button>
</div>

<script>
// ===== Theme Toggle =====
const themeToggle=document.getElementById('themeToggle');
let dark=false;
function applyTheme(){document.body.style.background=dark?"linear-gradient(135deg,#141e30,#1f2a45,#243b55)":"linear-gradient(135deg,#4facfe,#6fa1ff,#8e44ad)";}
themeToggle.addEventListener('click',()=>{dark=!dark;applyTheme();});
applyTheme();

// ===== Floating Menu =====
const floatingLinks=[{title:'Home',href:'index.html'},{title:'Team',href:'team.html'},{title:'Kite AI',href:'ai-helper.html'},{title:'VoKi AI',href:'AI.html'},{title:'Legal',href:'tos.html'}];
const menuItems=document.getElementById('menuItems');
floatingLinks.forEach(l=>{const a=document.createElement('a');a.textContent=l.title;a.href=l.href;menuItems.appendChild(a);});
let menuOpen=false;
document.getElementById('menuToggle').addEventListener('click',()=>{menuItems.style.display=menuOpen?'none':'flex';menuOpen=!menuOpen;});

// ===== Spotify API =====
const clientId = "537a23da3f4e4ac687c1768534637c2f";
const redirectUri = window.location.href.split('#')[0]; // redirect back to this page
let accessToken = null;

function authenticateSpotify(){
    const scopes = 'user-read-private user-read-email streaming';
    const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=token&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${encodeURIComponent(scopes)}`;
    window.location = authUrl;
}

// Parse token from URL
if(window.location.hash){
    const params = new URLSearchParams(window.location.hash.substring(1));
    accessToken = params.get('access_token');
    if(accessToken) window.history.replaceState({}, document.title, window.location.pathname);
}

// ===== Music Search & Preview =====
const searchBar=document.getElementById('searchBar');
const songGrid=document.getElementById('songGrid');
const audioPlayer=document.getElementById('audioPlayer');
const player=document.getElementById('player');
const trackCover=document.getElementById('trackCover');
const trackTitle=document.getElementById('trackTitle');
const trackArtist=document.getElementById('trackArtist');
const playPauseBtn=document.getElementById('playPauseBtn');

let currentTrack = 0;
let trackList = [];

searchBar.addEventListener('keypress', e=>{
    if(e.key==='Enter') searchSpotify(searchBar.value);
});

function searchSpotify(query){
    songGrid.innerHTML='Loading...';
    fetch(`https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=12`, {
        headers:{Authorization:`Bearer ${accessToken}`}
    })
    .then(res=>res.json())
    .then(data=>{
        songGrid.innerHTML='';
        trackList = data.tracks.items.filter(t=>t.preview_url);
        trackList.forEach((track,i)=>{
            const card=document.createElement('div'); card.className='card';
            card.innerHTML=`<img src="${track.album.images[0]?.url}" style="width:100%;border-radius:12px;"><h3>${track.name}</h3><p>${track.artists.map(a=>a.name).join(', ')}</p>`;
            card.addEventListener('click', ()=>{playTrack(i);});
            songGrid.appendChild(card);
        });
    }).catch(err=>{
        songGrid.innerHTML=`<p style="color:#fff;">Error fetching tracks. <button onclick="authenticateSpotify()">Login to Spotify</button></p>`;
        console.error(err);
    });
}

function playTrack(index){
    const track = trackList[index];
    if(!track) return;
    currentTrack=index;
    audioPlayer.src=track.preview_url;
    trackCover.src=track.album.images[0]?.url||'';
    trackTitle.textContent=track.name;
    trackArtist.textContent=track.artists.map(a=>a.name).join(', ');
    audioPlayer.play();
    player.style.display='flex';
    playPauseBtn.textContent='‚è∏Ô∏è';
}

playPauseBtn.addEventListener('click', ()=>{
    if(audioPlayer.paused){audioPlayer.play(); playPauseBtn.textContent='‚è∏Ô∏è';}
    else{audioPlayer.pause(); playPauseBtn.textContent='‚ñ∂Ô∏è';}
});

document.getElementById('prevBtn').addEventListener('click', ()=>{
    if(currentTrack>0) playTrack(currentTrack-1);
});
document.getElementById('nextBtn').addEventListener('click', ()=>{
    if(currentTrack<trackList.length-1) playTrack(currentTrack+1);
});
</script>

</body>
</html>
